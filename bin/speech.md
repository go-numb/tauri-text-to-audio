## テキスト音声合成アプリケーション

### 1. プロジェクト概要

本プロジェクトは、Google Cloud Text-to-Speech API を利用して、テキストを音声に変換するアプリケーションです。ユーザーがテキストを入力すると、指定された言語と音声で音声ファイルが生成されます。音声合成は、音声アシスタント、教育ツール、コンテンツ制作など、幅広い用途で活用できます。

### 2. まず利用するために (Getting Started)

**1. 環境構築:**

* Go 言語の開発環境を構築します。
* Google Cloud プロジェクトを作成し、Text-to-Speech API を有効化します。
* Google Cloud Platform Console から APIキーを取得します。

**2. ソースコードの取得:**

* GitHub からプロジェクトのソースコードをクローンします。

**3. 実行:**

`gcloud auth login`している場合は環境変数の設定は不要です。gcloudの設定プロジェクトに従い、accesstokenを取得します。

* APIキーを環境変数 `GOOGLE_APPLICATION_CREDENTIALS` に設定します。
* `go run main.go` コマンドを実行します。

**4. 音声ファイルの生成:**

* 必要なオプションを指定して実行します。
  * `-text`: 音声に変換するテキスト(デフォルト: Hello World)
  * `-output`: 生成される音声ファイルのパスとファイル名(デフォルト: ./speech-voice.wav) 
  * `-lang`: 言語コード (デフォルト: `ja-JP`)
  * `-voice`: 音声名 (デフォルト: `jp-JP-Standard-A`)

**例:**

```bash
go run main.go -text "こんにちは、世界！"
```

### 3. ファイル構造図とディレクトリ説明

```
├── main.go
└── README.md
```

* **main.go:** メインプログラムファイル。テキスト音声合成処理を実行します。
* **README.md:** プロジェクトの概要、使用方法、ファイル構成などを記述したドキュメントファイル。

### 4. 各ファイル・モジュールの詳細

#### main.go

* **目的:** テキスト音声合成処理を実行するメインプログラムファイル。
* **主要な関数:**
    * `main()`: プログラムのエントリポイント。
    * `init()`: コマンドライン引数をパースします。
    * `saveAudioToFile()`: 音声データをファイルに保存します。
* **依存関係:**
    * `cloud.google.com/go/texttospeech/apiv1`: Google Cloud Text-to-Speech API のクライアントライブラリ。
    * `flag`: コマンドライン引数のパース用ライブラリ。
    * `fmt`: フォーマット出力用ライブラリ。
    * `log`: ログ出力用ライブラリ。
    * `os`: ファイル操作用ライブラリ。
* **使用例:** 
  * `main()` 関数は、Text-to-Speech API クライアントを作成し、`SynthesizeSpeech()` メソッドでテキストを音声に変換します。
  * `saveAudioToFile()` 関数は、変換された音声データを指定されたファイルに保存します。

### 5. 設計アルゴリズムやパターン

* **Text-to-Speech API 活用:** Google Cloud Text-to-Speech API を利用して、テキストを音声に変換します。
* **依存性注入:** API クライアントは、`main()` 関数内で作成され、必要な場所に注入されます。

### 6. 環境構築・セットアップ手順

**1. Go 言語のインストール:**

* Go の公式サイト ([https://go.dev/](https://go.dev/)) から Go をダウンロードしてインストールします。

**2. Google Cloud プロジェクトの作成:**

* Google Cloud Platform Console ([https://console.cloud.google.com/](https://console.cloud.google.com/)) にアクセスし、新しいプロジェクトを作成します。

**3. Text-to-Speech API の有効化:**

* プロジェクトの API ライブラリで Text-to-Speech API を有効化します。

**4. API キーの取得:**

* API キーを作成し、環境変数 `GOOGLE_APPLICATION_CREDENTIALS` に設定します。

**5. ソースコードの取得:**

* GitHub からプロジェクトのソースコードをクローンします。

**6. 実行:**

* `go run main.go` コマンドを実行します。

### 7. ベストプラクティスと拡張方法

* **API キーの管理:** API キーは安全に管理し、公開しないように注意してください。
* **エラー処理:** エラー発生時の処理を適切に実装し、ログ出力やユーザーへの通知を行うようにしてください。
* **言語サポートの拡張:** 複数の言語に対応できるように、言語コードと音声名の一覧を管理する機能を追加します。
* **音声品質の調整:** 音声品質やアクセントを調整するオプションを追加します。
* **音声効果の追加:** 音声効果 (例: エコー、リバーブ) を追加する機能を追加します。

### 新規参加者や利用者向けの追記

* Text-to-Speech API の利用には、Google Cloud プロジェクトとAPIキーが必要となります。
* `main.go` ファイルは、Text-to-Speech API のクライアントライブラリをインポートし、テキストを音声に変換する処理を実行します。
* このプロジェクトは、音声アシスタントや教育ツールなど、様々な用途で活用できます。

### ドキュメント構成のスタイル

* 各セクションは簡潔かつ詳細に記述されており、読みやすさを考慮しています。
* 技術的な項目は、コードスニペットや例を交えて具体的に解説しています。
* 新規参加者や既存ユーザーがプロジェクトを理解し、貢献しやすいよう、明確な説明を心がけています。
